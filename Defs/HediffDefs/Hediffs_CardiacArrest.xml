<?xml version="1.0" encoding="utf-8"?>
<Defs>
  <HediffDef ParentName="DiseaseBase">
    <defName>CardiacArrest</defName>
    <label>cardiac arrest</label>
    <description>Cardiac arrest is a sudden loss of blood flow resulting from the failure of the heart to effectively pump blood. The lack of blood flow causes the body to stop working properly, resulting in loss of consciousness and death if not treated immediately. Causes for cardiac arrest include conditions that starve the heart of oxygen, such as extreme blood loss.
\nA skilled doctor must perform CPR to restore blood flow and hopefully restart the heart. In early stages of cardiac arrest, during ventricular fibrillation, a defibrillator can also be used to shock the heart back into a normal rhythm, which may be faster and more effective than CPR.</description>
    <maxSeverity>1</maxSeverity>
    <alwaysShowSeverity>true</alwaysShowSeverity>
    <defaultLabelColor>(255, 52, 52)</defaultLabelColor>
    <tendable>false</tendable>
    <comps>
      <li Class="HediffCompProperties_SeverityPerDay">
        <severityPerDay>8.0</severityPerDay>
      </li>
      <li Class="HediffCompProperties_Discoverable">
        <sendLetterWhenDiscovered>false</sendLetterWhenDiscovered>
      </li>
      <li Class="MoreInjuries.HealthConditions.CardiacArrest.HediffCompProperties_CardiacArrest"></li>
      <li Class="MoreInjuries.HealthConditions.Secondary.HediffCompProperties_SecondaryCondition">
        <severityCurve>
          <points>
            <li>0, 0</li>
            <li>0.55, 0.25</li>
            <li>0.75, 0.9</li>
            <li>1, 1</li>
          </points>
        </severityCurve>
        <handlers>
          <li Class="MoreInjuries.HealthConditions.CardiacArrest.Secondary.HediffCompHandler_SecondaryCondition_Hypoxia">
            <tickInterval>250</tickInterval>
            <chanceModifiers>
              <li Class="MoreInjuries.HealthConditions.Secondary.Handlers.ChanceModifiers.HediffChanceModifier_LinkedHediffCurve">
                <hediffDef>Hypothermia</hediffDef>
                <!-- hypothermia slows down the damaging effects of hypoxia: (hypothermia severity) => hypoxia chance factor -->
                <severityCurve>
                  <points>
                    <li>0, 1</li>
                    <li>0.2, 0.8</li>
                    <li>0.6, 0.45</li>
                    <li>1, 0.2</li>
                  </points>
                </severityCurve>
              </li>
            </chanceModifiers>
            <hediffMakerProps Class="MoreInjuries.HealthConditions.Secondary.Handlers.HediffMakers.HediffMakerProperties_SingleHediff">
              <hediffMakerDef>
                <hediffDef>OrganHypoxia</hediffDef>
                <minSeverity>1</minSeverity>
                <maxSeverity>5</maxSeverity>
                <allowMultiple>true</allowMultiple>
                <allowDuplicate>false</allowDuplicate>
              </hediffMakerDef>
            </hediffMakerProps>
            <targetEvaluator Class="MoreInjuries.HealthConditions.Secondary.Handlers.TargetEvaluators.BodyPartHediffTargetEvaluator_RandomBleedable">
              <height>Middle</height>
              <depth>Inside</depth>
              <excludedParts>
                <li>Heart</li>
              </excludedParts>
            </targetEvaluator>
          </li>
          <li Class="MoreInjuries.HealthConditions.CardiacArrest.Secondary.HediffCompHandler_SecondaryCondition_Hypoxia">
            <tickInterval>250</tickInterval>
            <baseChance>0.375</baseChance>
            <chanceModifiers>
              <li Class="MoreInjuries.HealthConditions.Secondary.Handlers.ChanceModifiers.HediffChanceModifier_LinkedHediffCurve">
                <hediffDef>Hypothermia</hediffDef>
                <!-- hypothermia slows down the damaging effects of hypoxia: (hypothermia severity) => hypoxia chance factor -->
                <severityCurve>
                  <points>
                    <li>0, 1</li>
                    <li>0.2, 0.8</li>
                    <li>0.6, 0.45</li>
                    <li>1, 0.2</li>
                  </points>
                </severityCurve>
              </li>
              <li Class="MoreInjuries.HealthConditions.Secondary.Handlers.ChanceModifiers.HediffChanceModifier_LinkedHediffCurve">
                <hediffDef>BrainDamage_Hypoxia</hediffDef>
                <!-- reduce chance for severe damage once hypoxia is already there -->
                <!-- brain damage is added over time, this curve gives brain damage a chance to manifest -->
                <severityCurve>
                  <points>
                    <li>0, 1</li>
                    <li>2, 0.9</li>
                    <li>4, 0.5</li>
                    <li>6, 0.25</li>
                  </points>
                </severityCurve>
              </li>
            </chanceModifiers>
            <hediffMakerProps Class="MoreInjuries.HealthConditions.Secondary.Handlers.HediffMakers.HediffMakerProperties_SingleHediff">
              <hediffMakerDef>
                <hediffDef>BrainDamage_Hypoxia</hediffDef>
                <minSeverity>0.1</minSeverity>
                <maxSeverity>2</maxSeverity>
                <allowMultiple>true</allowMultiple>
                <allowDuplicate>false</allowDuplicate>
              </hediffMakerDef>
            </hediffMakerProps>
            <targetEvaluator Class="MoreInjuries.HealthConditions.Secondary.Handlers.TargetEvaluators.BodyPartHediffTargetEvaluator_Single">
              <target>Brain</target>
            </targetEvaluator>
          </li>
        </handlers>
      </li>
    </comps>
    <stages>
      <li>
        <label>ventricular fibrillation</label>
        <lifeThreatening>true</lifeThreatening>
        <becomeVisible>true</becomeVisible>
        <minSeverity>0</minSeverity>
        <capMods>
          <li>
            <capacity>Consciousness</capacity>
            <setMax>0.01</setMax>
          </li>
        </capMods>
      </li>
      <li>
        <label>clinical death</label>
        <lifeThreatening>true</lifeThreatening>
        <becomeVisible>true</becomeVisible>
        <minSeverity>0.65</minSeverity>
        <capMods>
          <li>
            <capacity>Consciousness</capacity>
            <setMax>0.01</setMax>
          </li>
        </capMods>
      </li>
    </stages>
  </HediffDef>
</Defs>