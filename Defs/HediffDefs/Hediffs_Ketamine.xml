<?xml version="1.0" encoding="utf-8"?>
<Defs>
  <HediffDef>
    <defName>KetamineBuildup</defName>
    <label>ketamine buildup</label>
    <description>Ketamine is a fast-acting dissociative anesthetic used for pain relief, sedation, and anesthesia. It works by disrupting communication between the thalamus and cerebral cortex, producing a trance-like, pain-free state without significantly suppressing cardiovascular function at recommended doses.\n\nOnce administered, ketamine is distributed systemically and slowly metabolized by the liver. Blood concentrations diminish over time, but repeated or excessive doses can lead to dangerous accumulation resulting in toxicity and overdose.\n\nSymptoms of ketamine toxicity range from amnesia, confusion, and hallucinations to brain damage, respiratory depression, and death in severe cases of overdose.</description>
    <hediffClass>HediffWithComps</hediffClass>
    <defaultLabelColor>(56, 185, 255)</defaultLabelColor>
    <initialSeverity>0.01</initialSeverity>
    <isBad>true</isBad>
    <scenarioCanAdd>true</scenarioCanAdd>
    <comps>
      <!-- Initialized to ~0.35 per injection. 12-hour in-game metabolic half-life -->
      <li Class="HediffCompProperties_SeverityPerDay">
        <severityPerDay>-0.35</severityPerDay>
        <showHoursToRecover>true</showHoursToRecover>
      </li>
      <li Class="MoreInjuries.HealthConditions.Secondary.HediffCompProperties_SecondaryCondition">
        <severityCurve>
          <points>
            <li>0, 0</li>
            <li>0.2, 0</li>
            <li>0.4, 0.002</li>
            <li>0.6, 0.03</li>
            <li>0.8, 0.06</li>
            <li>1, 0.175</li>
          </points>
        </severityCurve>
        <handlers>
          <li Class="MoreInjuries.HealthConditions.Secondary.Handlers.HediffCompHandler_SecondaryCondition_TargetsBodyPart">
            <tickInterval>2000</tickInterval>
            <sendLetterWhenDiscovered>true</sendLetterWhenDiscovered>
            <chanceModifiers>
              <li Class="MoreInjuries.HealthConditions.Secondary.Handlers.ChanceModifiers.HediffChanceModifier_DisallowDeathResting"></li>
            </chanceModifiers>
            <hediffMakerProps Class="MoreInjuries.HealthConditions.Secondary.Handlers.HediffMakers.HediffMakerProperties_SingleHediff">
              <hediffMakerDef>
                <hediffDef>CardiacArrest</hediffDef>
                <minSeverity>0.01</minSeverity>
                <allowMultiple>false</allowMultiple>
                <allowDuplicate>false</allowDuplicate>
              </hediffMakerDef>
            </hediffMakerProps>
            <targetEvaluator Class="MoreInjuries.HealthConditions.Secondary.Handlers.TargetEvaluators.BodyPartHediffTargetEvaluator_Single">
              <target>Heart</target>
            </targetEvaluator>
          </li>
        </handlers>
      </li>
    </comps>
    <stages>
      <li>
        <label>trace exposure</label>
        <minSeverity>0</minSeverity>
        <painFactor>0.95</painFactor>
      </li>
      <li>
        <label>therapeutic dose</label>
        <minSeverity>0.1</minSeverity>
        <forgetMemoryThoughtMtbDays>4</forgetMemoryThoughtMtbDays>
      </li>
      <li>
        <label>maximum safe dose</label>
        <minSeverity>0.2</minSeverity>
        <forgetMemoryThoughtMtbDays>2</forgetMemoryThoughtMtbDays>
      </li>
      <li>
        <label>subclinical overdose</label>
        <minSeverity>0.4</minSeverity>
        <forgetMemoryThoughtMtbDays>1</forgetMemoryThoughtMtbDays>
        <capMods>
          <li>
            <capacity>Consciousness</capacity>
            <offset>-0.1</offset>
          </li>
          <li>
            <capacity>Breathing</capacity>
            <offset>-0.1</offset>
          </li>
        </capMods>
      </li>
      <li>
        <label>severe overdose</label>
        <minSeverity>0.6</minSeverity>
        <capMods>
          <li>
            <capacity>Consciousness</capacity>
            <offset>-0.2</offset>
          </li>
          <li>
            <capacity>Breathing</capacity>
            <offset>-0.2</offset>
          </li>
        </capMods>
      </li>
      <li>
        <label>toxic dose</label>
        <minSeverity>0.8</minSeverity>
        <capMods>
          <li>
            <capacity>Consciousness</capacity>
            <offset>-0.5</offset>
          </li>
          <li>
            <capacity>Breathing</capacity>
            <offset>-0.4</offset>
          </li>
        </capMods>
      </li>
    </stages>
  </HediffDef>
</Defs>
